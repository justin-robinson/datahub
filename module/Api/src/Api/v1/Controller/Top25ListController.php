<?php
/**
 * Created by PhpStorm.
 * User: dbullard
 * Date: 8/10/16
 * Time: 1:52 PM
 */

namespace Api\v1\Controller;

use Api\v1\ResponseFormatter\Top25ListCollectionFormatter;
use DB\Datahub\CompanyInstanceTop25lists;
use Scoop\Database\Model\Generic;
use Zend\Db\Sql\Ddl\Column\Integer;
use Zend\View\Model\JsonModel;

/**
 * Class Top25ListController
 *
 * @package Api\v1\Controller
 */
class Top25ListController extends AbstractRestfulController
{
    /**
     * @param $companyInstanceId
     *
     * @return JsonModel
     */
    public function get($companyInstanceId){
        $lists = CompanyInstanceTop25lists::fetch_where('companyInstanceId = ?', [$companyInstanceId]);
        if ($lists) {
            
            return new JsonModel(Top25ListCollectionFormatter::format($lists));
        }

        return $this->getResponse()->setStatusCode(204);
        
    }
    
    /**
     * @param $data
     *
     * {
     *   "companyMeroveusId": 11111,
     *   "listId":            1111,
     *   "issueDate":         "",
     *   "pageHeadline":      "",
     *   "listUrl":           ""
     * }
     *
     * @return mixed
     */
    public function create($data)
    {
        return parent::create($data); // TODO: Change the autogenerated stub
    }
}